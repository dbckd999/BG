<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
                  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="study.projectBG.BG.mapper.AdminRestroomMapper">
	<!-- study.projectBG.BG.model.MapDTO -->
	
	<select id="showRestroomList" resultType="study.projectBG.BG.model.MapDTO">
		SELECT * FROM restroom
	</select>
	<insert id="restroomInsert">
		INSERT INTO restroom (category, restroom_name, address_load, address_location, 
		is_public_gender, c_man_closet, c_man_urinal, c_man_disable_person_closet, 
		c_man_disable_person_urinal, c_man_child_closet, c_man_child_urinal, 
		c_woman_closet, c_woman_disable_person_urinal, c_woman_child_closet, 
		manage_group_name, call_number, open_day_info, opening_time, closing_time, 
		installation_date, wgs84_latitude, wgs84_longitude, owner_name_group, 
		installation_details, sewage_care_processing, have_emergency_bell, 
		emergency_bell_location, have_entrance_cctv, have_diaper_switchboard, 
		diaper_switchboard_location, remodeling_date, db_update_date) 
		VALUES(#{category}, #{restroom_name}, #{address_load}, #{address_location}, 
		#{is_public_gender}, #{c_man_closet}, #{c_man_urinal}, #{c_man_disable_person_closet}, 
		#{c_man_disable_person_urinal}, #{c_man_child_closet}, #{c_man_child_urinal}, 
		#{c_woman_closet}, #{c_woman_disable_person_urinal}, #{c_woman_child_closet}, 
		#{manage_group_name}, #{call_number}, #{open_day_info}, #{opening_time}, #{closing_time}, 
		#{installation_date}, #{wgs84_latitude}, #{wgs84_longitude}, #{owner_name_group}, 
		#{installation_details}, #{sewage_care_processing}, #{have_emergency_bell}, 
		#{emergency_bell_location}, #{have_entrance_cctv}, #{have_diaper_switchboard}, 
		#{diaper_switchboard_location}, #{remodeling_date}, #{db_update_date});
	</insert>
	
	  <!-- MySQL-->
    <!-- 게시물 목록(페이징) -->
    <select id="getListPaging" resultType="study.projectBG.BG.model.MapDTO">
        select * 
        from restroom  
        <if test="keyword != null">
        <![CDATA[where restroom_name like concat('%',#{keyword},'%')]]>  
        </if>
        order by id desc 
        <!-- limit ((${pageNum}-1)*${amount}), ${amount} -->
        limit #{skip},#{amount}
    </select>
    
    <select id="getTotal" resultType="int">
        select count(*) from restroom
         <if test="keyword != null">
        <![CDATA[where restroom_name like concat('%',#{keyword},'%')]]>  
        </if>
    </select>
	
</mapper>